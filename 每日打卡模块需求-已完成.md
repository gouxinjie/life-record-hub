
## 一、核心基础功能（P0）

满足打卡的核心使用需求，无此则模块不可用，是开发首要实现的功能，贴合个人日常打卡的核心诉求：**创建打卡项→每日标记完成/未完成→查看历史记录**。

### 1. 打卡项管理（核心，关联用户ID，数据私有化）

- **新增打卡项**：输入打卡项名称（如跑步、阅读、背单词、喝水，≤50字符，非空），支持绑定系统一级菜单「打卡」下的二级分类（可选，如「运动打卡」「学习打卡」，和系统菜单联动）；
- **编辑打卡项**：修改打卡项名称、所属二级分类，保存后实时同步所有相关页面；
- **启用/禁用打卡项**：禁用后，打卡项不再出现在「每日打卡」主页面，历史记录保留；启用后恢复展示，不影响历史数据；
- **删除打卡项**：无历史打卡记录可直接删除；有历史记录时，弹窗提示「删除后该打卡项的所有历史记录将一并删除，不可恢复」，二次确认后删除（联动删除打卡记录表数据）。

### 2. 每日打卡操作（核心，极简操作，符合个人使用习惯）

- **日期切换**：默认展示**当日日期**，支持快速切换「昨日/明日/任意历史日期」，切换后加载对应日期的打卡状态；
- **一键标记状态**：以列表/卡片形式展示所有**启用的打卡项**，每个项带复选框，点击直接切换「完成✅/未完成❌」，实时保存到后端，无需额外确认（极简操作核心）；
- **单日备注添加**：每个打卡项支持填写当日打卡备注（如「跑步5公里」「阅读20页」，≤200字符，可选），标记状态时可同步填写，也可后续编辑；
- **重复打卡防呆**：同一用户、同一打卡项、同一日期，仅能存在一条打卡记录（后端通过`user_id+item_id+check_date`联合索引+接口校验实现，避免重复创建）。

### 3. 打卡历史记录查看（核心，可追溯）

- **记录列表展示**：按**日期倒序**展示所有打卡记录，按「日期分组」，每组显示当日所有打卡项的「名称+状态+备注（有则显示）」；
- **基础筛选**：支持按**打卡项名称**/**日期范围**（开始日期-结束日期）筛选记录，快速定位指定打卡项/时间段的打卡情况；
- **记录详情**：点击单条记录，可查看打卡项名称、打卡日期、状态、备注、创建/更新时间。

### 4. 基础数据统计（核心，可视化反馈，提升打卡动力）

- **当日统计**：在打卡主页面顶部展示**核心统计数据**，实时更新：总启用打卡项数、已完成数、未完成数、当日完成率（已完成/总启用）；
- **打卡项单独统计**：每个打卡项展示**累计完成次数**（所有历史日期中标记为完成的次数），直观看到各习惯的坚持情况。


## 二、模块核心联动规则（和系统其他模块的关联）

1. **和用户模块联动**：所有打卡项、打卡记录均关联**用户ID**，实现数据私有化，不同用户登录后仅能查看/操作自己的打卡数据；（不同用户登录后仅能查看/操作自己的打卡数据 这个功能可以先不实现，预留注释）
2. **和系统通用功能联动**：复用系统的**异常提示**（如打卡项名称为空、重复创建记录）、**权限校验**（所有接口需JWT鉴权）、**数据分页**（历史记录列表分页加载，每页10/20条）。

## 三、前端页面布局建议（贴合React+Ant Design，轻量化）

### 1. 打卡主页面（核心）

- **顶部**：当日日期+当日统计数据（总项数/已完成/完成率）+日期切换按钮+批量操作按钮（批量完成/未完成）；
- **中间**：启用的打卡项列表/卡片（图标+名称+复选框+备注输入框），复选框点击实时切换状态，备注支持行内编辑；
- **底部**：历史记录入口+统计图表入口（P1）。

### 2. 打卡项管理页面

- 以**表格**展示所有打卡项，包含列：图标、名称、所属分类、状态（启用/禁用）、累计完成次数、操作（编辑/启用/禁用/删除）；
- 提供「新增打卡项」「批量删除」「批量启用/禁用」按钮，操作便捷。

### 3. 打卡历史记录页面

- 顶部：多条件筛选栏（打卡项/状态/日期范围；
- 中间：按日期分组的记录列表，支持分页加载；
- 右侧：快捷日期筛选（本周/本月/近7天/近30天）。

### 4. 打卡统计页面

- 按「当日/周/月/年」分标签展示，每个标签包含**统计图表**（折线图/柱状图）+**核心统计数据**+**打卡项排行**；
- 图表支持鼠标悬停查看详情（如悬停到某一天，显示当日完成率/打卡项）。

## 六、后端核心接口设计（适配Python+FastAPI，RESTful风格）

所有接口均需**JWT鉴权**，请求参数通过Pydantic校验，返回统一格式（code/msg/data），核心接口如下：

### 1. 打卡项相关

- `POST /api/checkin/item/add`：新增打卡项
- `PUT /api/checkin/item/update/{item_id}`：编辑打卡项
- `PUT /api/checkin/item/state/{item_id}`：切换打卡项启用/禁用状态
- `DELETE /api/checkin/item/delete/{item_id}`：删除打卡项
- `GET /api/checkin/item/list`：获取打卡项列表（支持按分类/状态筛选）

### 2. 每日打卡相关

- `POST /api/checkin/record/add`：新增/更新打卡记录（当日打卡，重复则更新状态/备注）
- `GET /api/checkin/record/today`：获取当日打卡记录
- `GET /api/checkin/record/date/{date}`：获取指定日期打卡记录

### 3. 历史记录相关

- `GET /api/checkin/record/history`：获取打卡历史记录（支持分页/多条件筛选）
- `DELETE /api/checkin/record/delete/{record_id}`：删除单条打卡记录

### 4. 统计相关

- `GET /api/checkin/stat/today`：获取当日打卡统计
- `GET /api/checkin/stat/week`：获取本周打卡统计
- `GET /api/checkin/stat/month`：获取本月打卡统计
- `GET /api/checkin/stat/item/{item_id}`：获取指定打卡项的累计统计
